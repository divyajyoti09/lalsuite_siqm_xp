#!/bin/bash

set -ex

# detect macOS, on which strftime behaves differently compared to glibc
if [[ "$(uname)" == "Darwin" ]]; then
	UTC_TZ_NAME="UTC"
else
	UTC_TZ_NAME="GMT"
fi

test "$(./lal_tconvert Fri, 13 May 2005 06:13:07 +0000)" -eq 800000000

test "$(./lal_tconvert 1831518865)" == "Tue Jan 19 03:14:07 ${UTC_TZ_NAME} 2038"   # Y2038 check
test "$(./lal_tconvert 1831518866)" == "Tue Jan 19 03:14:08 ${UTC_TZ_NAME} 2038"   # Y2038 check
